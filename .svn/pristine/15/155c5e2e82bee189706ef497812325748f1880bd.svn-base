package web.com.springweb.project.p02_service;

import java.util.List;

import org.apache.ibatis.annotations.Param;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import web.com.springweb.project.p04_vo.ClassRecord;
import web.com.springweb.project.p04_vo.CounselRequest;
import web.com.springweb.project.p04_vo.JoinMem;
import web.com.springweb.project.p03_dao.P_Dao;

@Service
public class P_Service {
	@Autowired(required = false)
	private P_Dao dao;
	// 이기찬
	// 회원가입
	public String insertJoinMem(JoinMem ins) {
		return dao.insertJoinMem(ins)>0?"등록성공":"등록실패";
	}
	// 아이디 중복 체크
	public boolean checkId(String memId) {
	    return dao.checkId(memId) == 0;  // 중복이 없으면 true (가입 가능)
	}
	// 로그인
	public JoinMem selectMember(JoinMem login) {
		return dao.selectMember(login);
	}
	
	// 회원정보 수정
	public String updateMem(JoinMem upt) {
		return dao.updateMem(upt)>0?"수정성공":"수정실패";
	}
	// 회원정보 삭제
	public String deleteMem(JoinMem del) {
		return dao.deleteMem(del)>0?"삭제성공":"삭제성공";
	}
	
	//지홍님 파트
	// 수업 기록 리스트
	public List<ClassRecord> classRecordList(ClassRecord sch) {
		if(sch.getClassContents()==null) sch.setClassContents("");
		sch.setClassContents("%"+sch.getClassContents()+"%");
		return dao.classRecordList(sch);
	}
	// 수업 기록 입력
	public String insertClassRecord(ClassRecord ins) {
		
		return dao.insertClassRecord(ins)>0?"등록성공":"등록실패";
	}
	
	// 승우님 파트
	// 무료 체험리스트 보는 곳
	public List<CounselRequest> crList(CounselRequest sch) {
		if(sch.getName()==null) sch.setName("");
		sch.setName("%"+sch.getName()+"%");	
		return dao.crList(sch);
	}
	
	// 무료 체험 신청 폼
	public String insertCR(CounselRequest ins) {
		return dao.insertCR(ins)>0?"등록성공":"등록실패";
	}
	
	// 명철님 파트
	
	// 조회 버튼 누르면 아이디값이 가서 상세페이지
	public JoinMem memberById(int memPird) {
		return dao.memberById(memPird);
	}
	// 회원정보리스트(선생님이랑 관리자 페이지로 연결되게 하기)
	public List<JoinMem> getMemberList(JoinMem sch) {
		if(sch.getMemName()==null) sch.setMemName("");
		if(sch.getMemId()==null) sch.setMemId("");
		// "%" + get XXX "%"
		sch.setMemName("%"+sch.getMemName()+"%");
		sch.setMemId("%"+sch.getMemId()+"%");
	
		return dao.getMemberList(sch);
	}
	
	
}
