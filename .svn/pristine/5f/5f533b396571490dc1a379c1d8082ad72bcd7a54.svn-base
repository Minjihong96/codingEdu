CREATE TABLE JOIN_MEMBERSHIP (
	MEM_PRID        NUMBER(8,0) PRIMARY KEY,
    MEM_ID          VARCHAR2(50) NOT NULL UNIQUE,
    MEM_PWD         VARCHAR2(50) NOT NULL,
    MEM_NAME		VARCHAR2(50) NOT NULL,
    MEM_PHONE       VARCHAR2(50) NOT NULL,
    MEM_EMAIL       VARCHAR2(100) NOT NULL,
    MEM_ADDRESS     VARCHAR2(100) NOT NULL,
    MEM_BIRTHDAY    DATE NOT NULL,
    ACCOUNT_TYPE    VARCHAR2(20) DEFAULT 'student' CHECK (ACCOUNT_TYPE IN ('admin', 'student', 'teacher', 'etc')),
    created_at      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- MEM_PRID에 들어갈 SEQUENCE 1부터 회원가입을 할떄마다 1씩 증가하게
CREATE SEQUENCE PRID_SEQ;

CREATE OR REPLACE TRIGGER trg_update_timestamp
BEFORE UPDATE ON JOIN_MEMBERSHIP
FOR EACH ROW
BEGIN
    :NEW.updated_at := CURRENT_TIMESTAMP;
END;

SELECT * FROM JOIN_MEMBERSHIP;
SELECT * FROM JOIN_MEMBERSHIP WHERE MEM_ID = 'qwe123' AND MEM_PWD = 'qwer1234!!';
SELECT * FROM JOIN_MEMBERSHIP WHERE MEM_PRID = 1;
/* 학생이 자기정보 보는 페이지
sql작성  private int memPrid;
    private String memId;
    private String memPwd;
    private String memName;
    private String memPhone;
    private String memEmail;
    private String memAddress;
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    private Date memBirthday;
    private String accountType;

@Select("SELECT * FROM JOIN_MEMBERSHIP WHERE MEM_PRID = #{memPrid}")
joinMembership memberById(@Param("memPrid")int memPird)

qwe1234  Q1W2E3R4!!
 *
 *  */

SELECT * FROM JOIN_MEMBERSHIP;
/*
자기정보 수정/삭제
 */
SELECT * FROM JOIN_MEMBERSHIP
WHERE MEM_NAME LIKE '%%' 
  AND MEM_PRID  = 0-- MEM_PRID에 특정 숫자 패턴이 포함된 경우
ORDER BY MEM_PRID DESC;

SELECT * FROM JOIN_MEMBERSHIP
WHERE MEM_NAME LIKE '%%'
AND MEM_ID LIKE '%%'
ORDER BY MEM_PRID DESC;

/*
CREATE TABLE class_record (
    RECORD_ID       NUMBER PRIMARY KEY,             -- 기록아이디 (기본키)
    MEM_PRID        NUMBER(8,0) NOT NULL UNIQUE,    -- 회원아이디 (학생 ID, 외래키 가능)
    CLASS_DATE      DATE NOT NULL,                  -- 수업날짜
    CLASS_CONTENTS   VARCHAR2(100) NOT NULL,         -- 수업내용
    SUBJECT         VARCHAR2(100),                  -- 과제
    SESSION_NUMBER  NUMBER NOT NULL,                -- 잔여수업회차
    PAYMENT         NUMBER,                         -- 결제
    ETC             VARCHAR2(100)                   -- 기타
);
*/
SELECT * FROM class_record;










