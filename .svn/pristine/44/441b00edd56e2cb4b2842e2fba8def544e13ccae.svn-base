<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"
    import="java.util.*"
    %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<c:set var="path" value="${pageContext.request.contextPath }"/>
<fmt:requestEncoding value="UTF-8"/>
<!DOCTYPE html>
<%--


 --%>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="${path}/com/bootstrap.min.css" >
<style>
	td{text-align:center;}
</style>
<script src="${path}/com/jquery-3.7.1.js"></script>
<script src="${path}/com/bootstrap.min.js"></script>
 <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicons/favicon.ico">
    <link rel="manifest" href="assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">


    <link href="assets/css/theme.css" rel="stylesheet" />
  <style>
    .valid-msg { font-size: 0.9rem; color: green; }
    .error-msg { font-size: 0.9rem; color: red; }

    
  </style>
  </head>


  <body>

    <main class="main" id="top">


      <section class="bg-primary py-2 d-none d-sm-block">

        <div class="container">
          <div class="row align-items-center">
            <div class="col-auto d-none d-lg-block">
              <p class="my-2 fs--1"><i class="fas fa-map-marker-alt me-3"></i><span>1600 Amphitheatre Parkway, CA 94043 </span></p>
            </div>
            <div class="col-auto ms-md-auto order-md-2 d-none d-sm-block">
              <ul class="list-unstyled list-inline my-2">
                <li class="list-inline-item"><a class="text-decoration-none" href="#!"><i class="fab fa-facebook-f text-900"></i></a></li>
                <li class="list-inline-item"><a class="text-decoration-none" href="#!"><i class="fab fa-pinterest text-900"></i></a></li>
                <li class="list-inline-item"><a class="text-decoration-none" href="#!"><i class="fab fa-twitter text-900"></i></a></li>
                <li class="list-inline-item"><a class="text-decoration-none" href="#!"><i class="fab fa-instagram text-900"> </i></a></li>
              </ul>
            </div>
            <div class="col-auto">
              <p class="my-2 fs--1"><i class="fas fa-envelope me-3"></i><a class="text-900" href="mailto:vctung@outlook.com">vctung@outlook.com </a></p>
            </div>
          </div>
        </div>
        </section>
      <nav class="navbar navbar-expand-lg navbar-light sticky-top py-3 d-block" data-navbar-on-scroll="data-navbar-on-scroll">
        <div class="container"><a class="navbar-brand" href="index.html"><img src="assets/img/gallery/logo-n.png" height="45" alt="logo" /></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"> </span></button>
          <div class="collapse navbar-collapse border-top border-lg-0 mt-4 mt-lg-0" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto pt-2 pt-lg-0 font-base">
              <li class="nav-item px-2"><a class="nav-link" aria-current="page" href="index.html">Home</a></li>
              <li class="nav-item px-2"><a class="nav-link" aria-current="page" href="pricing.html">Pricing</a></li>
              <li class="nav-item px-2"><a class="nav-link" aria-current="page" href="web-development.html">Web Development</a></li>
              <li class="nav-item px-2"><a class="nav-link active" aria-current="page" href="user-research.html">User Research</a></li>
            </ul><a class="btn btn-primary order-1 order-lg-0" href="#!">Sign Up</a>
            <form class="d-flex my-3 d-block d-lg-none">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" />
              <button class="btn btn-outline-primary" type="submit">Search</button>
            </form>
            <div class="dropdown d-none d-lg-block">
              <button class="btn btn-outline-light ms-2" id="dropdownMenuButton1" type="submit" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-search text-800"></i></button>
              <ul class="dropdown-menu dropdown-menu-lg-end" aria-labelledby="dropdownMenuButton1" style="top:55px">
                <form>
                  <input class="form-control" type="search" placeholder="Search" aria-label="Search" />
                </form>
              </ul>
            </div>
          </div>
        </div>
      </nav>

      <section class="pb-11 pt-7 bg-600">
	  <h1 class="mb-4 mt-5 text-center" style="font-family: sans-serif;">회원 정보</h1>
          <%-- 
              'member'라는 이름의 Java Bean 객체가 Spring Controller의 Model을 통해 전달된다고 가정합니다.
              예: @GetMapping("/memberInfo") public String getMemberInfo(Model model) {
                  model.addAttribute("member", memberService.getLoggedInMember());
                  return "your_jsp_file";
              }
               private int memPrid;
    private String memId;
    private String memPwd;
    private String memName;
    private String memPhone;
    private String memEmail;
    private String memAddress;
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    private Date memBirthday;
    private String accountType;
    private Timestamp createdAt;
    private Timestamp updatedAt;
 
          --%>
        <div class="container mt-5">
    <h2>전체 회원 목록</h2>

    <table class="table table-hover text-center">
         <colgroup>
        <col style="width: 10%;">  <%-- 1. 고유번호 --%>
        <col style="width: 15%;">  <%-- 2. 아이디 --%>
        <col style="width: 10%;">  <%-- 3. 이름 --%>
        <col style="width: 15%;">  <%-- 4. 핸드폰 --%>
        <col style="width: 25%;">  <%-- 5. 이메일 --%>
        <col style="width: 15%;">  <%-- 6. 가입일자 --%>
        <col style="width: 10%;">  <%-- 7. 상세보기 --%>
    </colgroup>
        <thead class="table-dark">
            <tr>
                <th>고유번호</th>
                <th>아이디</th>
                <th>이름</th>
                <th>핸드폰</th>
                <th>이메일</th>
                <th>가입일자</th>
                <th>상세보기</th>
            </tr>
        </thead>
        <tbody>
            <%-- c:forEach를 사용하여 memberList의 각 회원(member) 정보를 행(tr)으로 반복 출력 
            
            <c:forEach var="cu" items="${cuList}" >
    	<tr ondblclick="goDetail(${cu.customerId})">
    	<td>${cu.customerId}</td>
    	<td>${cu.customerName}</td>
    	<td>${cu.customerEmail}</td>
    		<td>${cu.customerPhone}</td>
    		<td>${cu.customerAddress}</td></tr>
    	</c:forEach>--%>
            <c:forEach var="mem" items="${memList}">
                <tr>
                    <%-- 각 필드를 테이블 데이터(td)로 표시 --%>
                    <td>${mem.memPrid}</td>
                    <td>${mem.memId}</td>
                    <td>${mem.memName}</td>
                    <td>${mem.memPhone}</td>
                    <td>${mem.memEmail}</td>
                    <td>
                        <fmt:formatDate value="${mem.createdAt}" pattern="yyyy-MM-dd"/>
                    </td>
                    <td>
                        <%-- 각 회원의 고유번호(memPrid)를 파라미터로 넘겨주는 상세 정보 페이지 링크 --%>
                        <a href="getMemberDetail?memPrid=${mem.memPrid}" class="btn btn-sm btn-outline-primary">
                            조회
                        </a>
                    </td>
                </tr>
            </c:forEach>

            <%-- 데이터가 없을 경우 메시지 표시 --%>
            <c:if test="${empty memList}">
                <tr>
                    <td colspan="7">조회된 회원이 없습니다.</td>
                </tr>
            </c:if>
        </tbody>
    </table>
</div>

        </section>
      </main>
    <script src="vendors/@popperjs/popper.min.js"></script>
    <script src="vendors/bootstrap/bootstrap.min.js"></script>
    <script src="vendors/is/is.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
    <script src="vendors/fontawesome/all.min.js"></script>
    <script src="assets/js/theme.js"></script>

<script type="text/javascript">

</script>
</body>

</html>